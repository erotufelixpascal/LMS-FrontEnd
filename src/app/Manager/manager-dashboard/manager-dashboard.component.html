
<section>
  <div class="flex w-full">
    <app-manager-navbar></app-manager-navbar>
  </div>  

    <article>
        <div class="alert alert-warning">
            <strong>Warning!</strong> This needs your urgent attention please!!.
        </div>
        <div class="timeDate">
          Current Date and Time: {{ currentDateTime }}
        </div>
        <p> Outstanding Loan Perfomers - Loan Officers</p>

        <div class="flex flex-row" style="background-color: lightskyblue;">
          <div class="flex-1 flex flex-col" style=" padding: 10px; margin: 5px;">
            <h3>First Column</h3>
            <p>Total Loan Amount Disbursed: $500,000</p>
            <p>Total Outstanding Amount: $200,000</p>
            <p>Interest Earned: $50,000</p>
          </div>
          <div class="flex-1 flex flex-col" style=" padding: 10px; margin: 5px;">
            <h3>Second Column</h3>
            <p>Total Loan Amount Disbursed: $500,000</p>
            <p>Total Outstanding Amount: $200,000</p>
            <p>Interest Earned: $50,000</p>
          </div>
          <div class="flex-1 flex flex-col" style=" padding: 10px; margin: 5px;">
            <h3>Third Column</h3>
            <p>Total Loan Amount Disbursed: $500,000</p>
            <p>Total Outstanding Amount: $200,000</p>
            <p>Interest Earned: $50,000</p>
          </div>
        </div>        
        <h3 class="w-1/3">Loan Setup</h3>
        <div class="flex flex-row">
          <div class="flex-1 flex flex-col" style="background-color: grey; padding: 10px; margin: 5px;">
            <h3>Loan Categories</h3>
                    <p *ngFor="let category of loanCategories()">{{category.loanName}}</p>
                    <div class="flex flex-start">
                      <button class="bg-blue-500 hover:bg-blue-700 text-white font-medium text-sm py-2 px-2 rounded" (click)="showModal()">Add loan categories</button>
                    </div>       
          </div>
          <div class="flex-1 flex flex-col" style="background-color: yellow; padding: 10px; margin: 5px;">
            <h3>Loan Terms</h3>
                    <p>Define loan terms for staff to use</p>
                    <p>London has over 13 million inhabitants.</p>
          </div>
          <div class="flex-1 flex flex-col" style="background-color: yellow; padding: 10px; margin: 5px;">
            <h3>Rome</h3>
                    <p>Rome is the capital city of Italy.</p>
                    <p>Rome has almost 3 million inhabitants.</p>
          </div>
        </div>

        <!-- new -->
        <p> Outstanding Loan Perfomers - Clients</p>
            <div class="container">
              <div>
                <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
                <!-- <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="center"> -->
                    <mat-tab label="Loan application approval"><br>
                        <button >Approve Application</button>
                        <p>Here you will find the Loan application</p>
                        <ag-grid-angular
                            style="width: 100%; height: 550px"
                            [class]="themeClass"
                            [defaultColDef]="defaultColDef"
                            [rowData]="loanApprovalList()"
                            [columnDefs]="loanApproval"
                            (gridSizeChanged)="onGridSizeChange($event)"
                            > </ag-grid-angular>
                    </mat-tab>
                    <mat-tab label="Loan Disbursed">Loan Disbursed<br>
                        <p>Here you will find the Loan Disbursment</p>
                        <ag-grid-angular
                            style="width: 100%; height: 550px"
                            [class]="themeClass"
                            [defaultColDef]="defaultColDef"
                            [rowData]="loanDisbursementList()"
                            [columnDefs]="loanDisbursement"
                            (gridSizeChanged)="onGridSizeChange($event)"
                            > </ag-grid-angular>
                    </mat-tab>
                    <mat-tab label="Closed Off Loans">Closed Off Loans<br>
                      <ag-grid-angular
                        style="width: 100%; height: 550px"
                        [class]="themeClass"
                        [defaultColDef]="defaultColDef"
                        [rowData]="loanClosedList()"
                        [columnDefs]="loanClosed"
                        (gridSizeChanged)="onGridSizeChange($event)"
                      > </ag-grid-angular>
                    </mat-tab>
                    <mat-tab label="Loan Terms">Loan Terms <br>
                      <!-- <ag-grid-angular
                        style="width: 100%; height: 550px"
                        [class]="themeClass"
                        [defaultColDef]="defaultColDef"
                        [rowData]="loanTerm"
                        [columnDefs]="loanTerms"
                        (gridSizeChanged)="onGridSizeChange($event)"
                      > </ag-grid-angular> -->
                    </mat-tab>
                    <mat-tab label="Loan Collateral">Loan Collateral <br>
                        <p>Here you will find the Loan Collateral</p>
                    </mat-tab>
                    <mat-tab label="Loan Files"><br>
                        <div class="container mt-4">
                            <!-- <h2>Loan Files</h2> -->
                            <table class="table table-bordered">
                              <thead>
                                <tr>
                                  <th>File Name</th>
                                  <th>Type</th>
                                  <th>Upload Date</th>
                                  <th>Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let file of loanFiles">
                                  <td>{{ file.fileName }}</td>
                                  <td>{{ file.fileType }}</td>
                                  <td>{{ file.uploadDate | date }}</td>
                                  <td>
                                    <button class="btn btn-primary" (click)="downloadFile(file)">Download</button>
                                    <button class="btn btn-danger" (click)="deleteFile(file)">Delete</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>                              
                    </mat-tab>
                    <mat-tab label="Loan Comments">Loan Comments/Reminders<br>
                        <div class="loan-comments">                              
                            <!-- Display existing comments -->
                            <div *ngFor="let comment of comments" class="comment">
                              <div class="comment-header">
                                <strong>{{ comment.userName }}</strong>
                                <span class="timestamp">{{ comment.timestamp | date:'short' }}</span>
                              </div>
                              <p>{{ comment.text }}</p>
                            </div>
                          
                            <!-- Add new comment -->
                            <div class="add-comment">
                              <h4>Add a Comment</h4>
                              <textarea [(ngModel)]="newComment.text" rows="3" placeholder="Write your comment..."></textarea>
                              <button (click)="addComment()">Submit</button>
                            </div>
                          </div>
                    </mat-tab>
                </mat-tab-group>
            </div>
            </div>
    

    </article>

</section>

  